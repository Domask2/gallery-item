(this.webpackJsonpfiregar=this.webpackJsonpfiregar||[]).push([[0],{24:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),c=a(16),s=a.n(c),i=(a(24),a(6)),o=a(1),l=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){setTimeout((function(){r(!1)}),1e3)}),[]),Object(o.jsx)("div",{className:a?"loader-wrapper":"none",children:Object(o.jsx)("div",{className:"lds-dual-ring"})})},u=function(){return Object(o.jsxs)("div",{children:[Object(o.jsx)(l,{}),Object(o.jsx)("div",{className:"content-bg"}),Object(o.jsx)("div",{className:"overlay-bg"})]})},j=a(14),d=a(10);a(29),a(30);d.a.initializeApp({apiKey:"AIzaSyATGJ4SSBYgrGhxyOyCVCG9WYUoiw5d9d8",authDomain:"firegram-39e15.firebaseapp.com",databaseURL:"https://firegram-39e15-default-rtdb.europe-west1.firebasedatabase.app",projectId:"firegram-39e15",storageBucket:"firegram-39e15.appspot.com",messagingSenderId:"1035538122088",appId:"1:1035538122088:web:6b563aa5a18446ad1a02dd"});var f=d.a.storage(),b=d.a.firestore(),m=d.a.firestore.FieldValue.serverTimestamp,O=a(13),p=a.n(O),g=a(18),h=function(e){var t=e.percent,a=e.setPercent,r=e.url;return Object(n.useEffect)((function(){r&&a(0)}),[r,a]),Object(o.jsx)("div",{className:"progress-bar",style:{width:t+"%"}})},x=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),s=Object(i.a)(c,2),l=s[0],u=s[1],j=Object(n.useState)(0),d=Object(i.a)(j,2),O=d[0],x=d[1],v=Object(n.useState)(null),_=Object(i.a)(v,2),N=_[0],S=_[1],w=Object(n.useState)(!1),y=Object(i.a)(w,2),A=y[0],D=y[1],J=function(e){e.preventDefault(),u(!0)},T=function(e){e.preventDefault(),u(!1)};return Object(n.useEffect)((function(){setTimeout((function(){D(!1)}),2e3)})),Object(n.useEffect)((function(){if(a.length>0){for(var e=function(){var e=a[t],n=f.ref(e.name),r=b.collection("images");u(!1),n.put(e,{name:e.name}).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;x(t)}),(function(e){D(!0)}),Object(g.a)(p.a.mark((function e(){var t,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getDownloadURL();case 2:return t=e.sent,e.next=5,n._delegate._location.path;case 5:return a=e.sent,S(t),c=m(),e.next=10,r.add({url:t,createdAt:c,name:a});case 10:case"end":return e.stop()}}),e)}))))},t=0;t<a.length;t++)e();r([])}}),[a]),Object(o.jsxs)("div",{children:[l?Object(o.jsx)("div",{className:"drop-area",onDragStart:function(e){return J(e)},onDragLeave:function(e){return T(e)},onDragOver:function(e){return J(e)},onDrop:function(e){return function(e){e.preventDefault();var t=e.dataTransfer.files;t=Array.from(t).filter((function(e){if(e.type.includes("image"))return e.type.includes("image");D(!0)})),r(t)}(e)},children:"\u041e\u0442\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0444\u0430\u0439\u043b\u044b \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438"}):Object(o.jsx)("div",{className:"drop-area",onDragStart:function(e){return J(e)},onDragLeave:function(e){return T(e)},onDragOver:function(e){return J(e)},children:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0444\u0430\u0439\u043b\u044b \u0447\u043e\u0431\u044b \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"}),A&&Object(o.jsx)("div",{className:"drop-area__error",children:" \u0414\u043e\u043f\u0443\u0441\u043a\u0430\u0435\u044e\u0442\u0441\u044f \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 JPG or PNG"}),Object(o.jsx)(h,{percent:O,setPercent:x,url:N})]})},v=a(11),_=a(19),N=a.n(_),S=function(){return Object(o.jsx)("div",{className:"smooth-preloader",children:Object(o.jsx)("svg",{width:"38",height:"38",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"#fff",children:Object(o.jsx)("g",{fill:"none",fillRule:"evenodd",children:Object(o.jsxs)("g",{transform:"translate(1 1)",strokeWidth:"2",children:[Object(o.jsx)("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),Object(o.jsx)("path",{d:"M36 18c0-9.94-8.06-18-18-18",children:Object(o.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})})]})})})})},w=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1];Object(n.useEffect)((function(){var e=b.collection("images").orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(j.a)(Object(j.a)({},e.data()),{},{id:e.id,name:e.data().name}))})),r(t)}));return function(){return e()}}),[]);var c=function(e){(b.collection("images").doc(e.target.getAttribute("data")).delete(),e.target.getAttribute("name"))&&f.ref().child(e.target.getAttribute("name")).delete().catch((function(e){throw e}))};return Object(o.jsx)("main",{className:"main",children:Object(o.jsxs)("div",{className:"container",children:[a.length>0&&Object(o.jsx)(x,{}),Object(o.jsx)("div",{className:"main__images",children:a&&a.map((function(e){return Object(o.jsxs)("div",{className:"main__images__item",children:[Object(o.jsx)(N.a,{className:"main__images__item__img",src:e.url,loading:function(){return Object(o.jsx)(S,{})}}),Object(o.jsx)("button",{className:"main__images__btn",onClick:c,data:e.id,name:e.name,children:Object(o.jsx)(v.a,{})})]},e.id)}))})]})})},y=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),s=Object(i.a)(c,2),l=s[0],u=s[1],j=Object(n.useState)(!1),d=Object(i.a)(j,2),f=d[0],O=d[1],p=Object(n.useRef)(null);Object(n.useEffect)((function(){setTimeout((function(){O(!1)}),2e3)}),[f]);return Object(o.jsxs)("form",{className:"form-img",children:[Object(o.jsx)("label",{className:"form-img__wrapper-text",children:Object(o.jsx)("input",{type:"text",value:a,onChange:function(e){r(e.target.value)},className:"form-img__input-text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 URL or JSON"})}),Object(o.jsxs)("div",{className:"form-img__container-file",children:[Object(o.jsxs)("label",{className:"form-img__wrapper-file",children:[Object(o.jsx)("input",{type:"file",accept:".JSON",onChange:function(){u(p.current.files)},ref:p,className:"form-img__input-file"}),Object(o.jsxs)("span",{className:"input__file-button-text",children:[Object(o.jsx)(v.b,{}),l?"\u0412\u044b\u0431\u0440\u0430\u043d 1 \u0444\u0430\u0439\u043b":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b"]})]}),Object(o.jsx)("input",{className:"form-img__container-file__btn",type:"submit",onClick:function(e){if(e.preventDefault(),a){var t=new Image;t.src=a,t.onload=function(){var e=b.collection("images"),t=m();e.add({url:a,createdAt:t})},t.onerror=function(){O(!0)},r("")}else if(l){var n=new FileReader;n.readAsText(l[0],"UTF-8"),n.onload=function(e){JSON.parse(e.target.result).galleryImages.forEach((function(e){if(void 0!==e){var t=b.collection("images"),a=m(),n=e.url;t.add({url:n,createdAt:a}),p.current.value=null,u(null)}}))}}else O(!0)},value:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"})]}),f&&Object(o.jsx)("div",{className:"form-img__error",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 URL \u0438\u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 JSON \u0444\u0430\u0439\u043b"})]})},A=function(){return Object(o.jsx)("header",{className:"header",children:Object(o.jsx)("div",{className:"container",children:Object(o.jsxs)("div",{className:"header__banner",children:[Object(o.jsxs)("div",{className:"header__title",children:[Object(o.jsx)("h2",{className:"header__title__h2",children:"\u0413\u0430\u043b\u0435\u0440\u0435\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439"}),Object(o.jsx)("p",{className:"header__title__p",children:"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 JPG, PNG \u0443\u043a\u0430\u0437\u0430\u0432 \u0432 \u043f\u043e\u043b\u0435 URL \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438, \u0438\u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0432 \u0444\u0430\u0439\u043b \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 - JSON. \u041f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443 drag-n-drop \u0432 \u0443\u0436\u0435 \u0433\u043e\u0442\u043e\u0432\u0443\u044e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u0443\u044e \u0433\u0430\u043b\u0435\u0440\u0435\u044e."})]}),Object(o.jsx)(y,{})]})})})};var D=function(){return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(u,{}),Object(o.jsx)(A,{}),Object(o.jsx)(w,{})]})};s.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(D,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.6b44ba83.chunk.js.map